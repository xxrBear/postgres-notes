## 字段类型

当我们定义一个表时：
```sql
CREATE TABLE weather (
    city            varchar(80),
    temp_lo         int,           -- low temperature
    temp_hi         int,           -- high temperature
    prcp            real,          -- precipitation
    date            date
);
```
varchar(80) 指定了一种数据类型，它可以存储长度最多为 80 个字符的任意字符串。 int 是标准的整数类型。 real 是用于存储单精度浮点数的类型。 date 的含义应该一目了然了。

在 PostgreSQL 乃至所有数据库系统中，字段类型的核心作用是：

> 定义数据的语义边界、存储方式与行为规则

也就是说，一个字段类型决定了：

- 数据在数据库中的存储方式
- 数据库如何理解和处理这个数据
- 数据可以进行哪些操作
- 系统在逻辑层面对数据的约束与优化能力

### 定义存储格式

不同类型有不同的底层存储布局 PostgreSQL 在存储层面对类型做了大量优化

例如：

- integer 占 4 字节，CPU 原生支持加减乘除
- text 是变长存储，有长度头（1~4字节）+实际内容
- numeric 存储为一组数码块，保证任意精度
- timestamp 存储为一个 8 字节的微秒计数值，计算高效

作用意义：

- 提高查询性能与存储效率；
- 让索引、排序、聚合等操作能被优化；
- 减少磁盘占用与内存拷贝成本。

### 表达语义

字段类型最本质的功能是表达语义

例如：

- timestamp 告诉数据库：这是一个时间，不是字符串
- numeric(18,2) 告诉数据库：这是一个金额，有两位小数
- boolean 告诉数据库：这是一个逻辑状态

这意味着：

- 系统在比较、运算时会按正确语义处理
- ORM 框架、API、前端系统都能根据类型生成正确的输入/输出逻辑
- 人类开发者能看懂表结构而不需要额外注释

### 设定约束

字段类型同时也是一种数据约束机制

举例：

- 如果字段是 integer，你不能插入 'abc'
- 如果字段是 date，2025-02-31 会报错
- 如果字段是 numeric(10,2)，123456789.999 会被拒绝
- 如果字段是 boolean，只允许 true/false

意义在于：

- 保证数据质量
- 在写入时就能发现业务错误
- 减少应用层验证的复杂性
- 确保系统间数据一致性

更多字段类型，请查看[字段类型参考](#字段类型参考)

[返回目录](#目录)
